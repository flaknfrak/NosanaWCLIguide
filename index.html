<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nosana Node Installation Guide</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
            color: #333;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .theme-toggle {
            text-align: center;
            margin-bottom: 20px;
        }

        .theme-button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }

        .theme-button:hover {
            background: #2980b9;
        }

        /* Dark mode styles */
        body.dark-mode {
            background-color: #1a1a1a;
            color: #e0e0e0;
        }

        body.dark-mode .container {
            background: #2d2d2d;
            color: #e0e0e0;
        }

        body.dark-mode h1 {
            color: #ffffff;
            border-bottom-color: #3498db;
        }

        body.dark-mode .quick-links {
            background: #3a3a3a;
        }

        body.dark-mode .quick-links h2 {
            color: #ffffff;
        }

        body.dark-mode .step {
            border-color: #555;
        }

        body.dark-mode .step-header {
            background: #444;
        }

        body.dark-mode .step-content {
            background: #2d2d2d;
        }

        body.dark-mode .important {
            background: #4a4a2a;
            border-color: #666633;
            color: #ffeb99;
        }

        body.dark-mode .critical {
            background: #4a2a2a;
            border-color: #663333;
            color: #ffcccc;
        }

        body.dark-mode .code {
            background: #3a3a3a;
            border-color: #555;
            color: #e0e0e0;
        }

        body.dark-mode .command {
            background: #1a1a1a;
            color: #00ff00;
        }

        body.dark-mode .verification {
            background: #2a4a2a;
            border-color: #336633;
            color: #ccffcc;
        }

        body.dark-mode a {
            color: #66b3ff;
        }

        body.dark-mode .nav-dropdown {
            background: #3a3a3a;
            border-color: #555;
            color: #e0e0e0;
        }

        .quick-links {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 30px;
        }

        .quick-links h2 {
            margin-top: 0;
            margin-bottom: 10px;
            color: #2c3e50;
            font-size: 16px;
        }

        .nav-dropdown {
            width: 250px;
            padding: 8px 12px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            background: white;
            color: #2c3e50;
            font-size: 14px;
            cursor: pointer;
        }

        .nav-dropdown:focus {
            outline: none;
            border-color: #3498db;
        }

        .step {
            margin-bottom: 30px;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
        }

        .step-header {
            background: #34495e;
            color: white;
            padding: 15px 20px;
            font-size: 18px;
            font-weight: bold;
        }

        .step-number {
            background: #3498db;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 16px;
        }

        .step-content {
            padding: 20px;
        }

        .important {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
        }

        .critical {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
            color: #721c24;
        }

        .code {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            overflow-x: auto;
        }

        .command {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            display: block;
        }

        .verification {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
            color: #155724;
        }

        ul {
            padding-left: 20px;
        }

        li {
            margin-bottom: 8px;
        }

        a {
            color: #3498db;
        }

        a:hover {
            color: #2980b9;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .links-container {
                flex-direction: column;
            }
            
            .quick-link {
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Nosana Node Installation Guide</h1>
        
        <div class="theme-toggle">
            <button class="theme-button" onclick="toggleTheme()">🌙 Toggle Dark Mode</button>
        </div>

        <!-- Quick Links -->
        <div class="quick-links">
            <h2>Quick Navigation</h2>
            <select class="nav-dropdown" onchange="navigateToStep(this.value)">
                <option value="">Select a step...</option>
                <option value="step1">1. Initial Setup</option>
                <option value="step2">2. WSL Config</option>
                <option value="step3">3. Ubuntu Install</option>
                <option value="step4">4. Docker Install</option>
                <option value="step5">5. NVIDIA Setup</option>
                <option value="step6">6. Podman Install</option>
                <option value="step7">7. Configure WSL2 DNS</option>
                <option value="step8">8. Set Google DNS</option>
                <option value="step9">9. Nosana Install</option>
            </select>
            
            <!-- Quick Tools Dropdown - Uncomment when ready to use -->
            <!--
            <select class="nav-dropdown" style="margin-left: 15px;" onchange="navigateToTool(this.value)">
                <option value="">Quick Tools...</option>
                <option value="cmd-monitor">CMD Monitor File</option>
                <option value="quick-reinstall">Quick Reinstall Guide</option>
                <option value="reset-dns">Resetting DNS</option>
                <option value="troubleshooting">Troubleshooting</option>
            </select>
            -->
        </div>

        <!-- Step 1: Initial Setup -->
        <div class="step" id="step1">
            <div class="step-header">
                <span class="step-number">1</span>Initial Setup
            </div>
            <div class="step-content">
                <div class="important">
                    <strong>IMPORTANT FIRST STEP - Change DNS before proceeding!</strong><br>
                    Set DNS to Google's servers: 8.8.8.8 and 8.8.4.4 in network adapter IPv4 settings.
                </div>

                <ul>
                    <li>Configure DNS for stable internet connection</li>
                    <li>Prepare your system for WSL installation</li>
                    <li>Set DNS to 8.8.8.8 and 8.8.4.4 in network adapter IPv4 settings</li>
                </ul>

                <div class="verification">
                    <strong>Verification:</strong> Restart PC to refresh DNS settings after making changes.
                </div>
            </div>
        </div>

        <!-- Step 2: WSL Config -->
        <div class="step" id="step2">
            <div class="step-header">
                <span class="step-number">2</span>WSL Configuration
            </div>
            <div class="step-content">
                <ul>
                    <li>Create WSL configuration file</li>
                    <li>Optimize memory and CPU allocation for containers</li>
                </ul>

                <p>Create in <strong>C:\Users\[USERNAME]\</strong> - Use notepad, save as ".wslconfig" with file type "all"</p>
                <p><em>Note: Each parameter should be on its own line</em></p>

                <div class="code">
[wsl2]
memory=58GB
processors=16
swap=16GB
                </div>

                <div class="important">
                    <strong>Note:</strong> Set memory to ~80% of your total RAM. Modify values according to your system specs
                </div>
            </div>
        </div>

        <!-- Step 3: Ubuntu Install -->
        <div class="step" id="step3">
            <div class="step-header">
                <span class="step-number">3</span>Ubuntu Installation
            </div>
            <div class="step-content">
                <ul>
                    <li>Install Ubuntu Linux subsystem</li>
                    <li>Set up command line environment for Nosana</li>
                </ul>

                <p>Open PowerShell as Administrator and run:</p>
                <div class="command">wsl --install -d Ubuntu-22.04</div>

                <p>Start Ubuntu and verify installation:</p>
                <div class="command">lsb_release -a</div>

                <div class="verification">
                    <strong>Expected:</strong> Ubuntu 22.04 LTS information should be displayed
                </div>
            </div>
        </div>

        <!-- Step 4: Docker Install -->
        <div class="step" id="step4">
            <div class="step-header">
                <span class="step-number">4</span>Docker Installation (AMD64)
            </div>
            <div class="step-content">
                <ul>
                    <li>Install Docker Desktop for container management</li>
                    <li>Configure WSL2 integration</li>
                    <li>Test containerization capabilities</li>
                </ul>

                <p>Download from: <a href="https://www.docker.com/products/docker-desktop/" target="_blank">https://www.docker.com/products/docker-desktop/</a></p>

                <ul>
                    <li>Check "Use WSL 2 instead of Hyper-V" during installation</li>
                    <li>Settings → General → Enable "Use WSL 2 based engine"</li>
                    <li>Settings → Resources → WSL Integration → Enable Ubuntu-22.04</li>
                </ul>

                <div class="command">sudo usermod -aG docker $USER</div>

                <p>Close Ubuntu window, wait 10 seconds, then reopen</p>

                <div class="command">docker run hello-world</div>

                <div class="verification">
                    <strong>Expected:</strong> "Hello from Docker!" message confirming successful installation
                </div>
            </div>
        </div>

        <!-- Step 5: NVIDIA Setup -->
        <div class="step" id="step5">
            <div class="step-header">
                <span class="step-number">5</span>NVIDIA Configuration
            </div>
            <div class="step-content">
                <ul>
                    <li>Enable GPU access in containers</li>
                    <li>Install NVIDIA container toolkit</li>
                    <li>Configure GPU passthrough for compute tasks</li>
                </ul>

                <div class="command">nvidia-smi</div>
                <p>Update to latest drivers from NVIDIA website if needed</p>

                <div class="command">curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg && curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list && sudo apt-get update</div>

                <div class="command">sudo apt-get install -y nvidia-container-toolkit</div>
                <div class="command">sudo nvidia-ctk cdi generate --output=/etc/cdi/nvidia.yaml</div>
                <div class="command">sudo nvidia-ctk cdi list</div>

                <div class="verification">
                    <strong>Expected:</strong> NVIDIA GPU should be listed with UUID
                </div>
            </div>
        </div>

        <!-- Step 6: Podman Install -->
        <div class="step" id="step6">
            <div class="step-header">
                <span class="step-number">6</span>Podman Installation
            </div>
            <div class="step-content">
                <ul>
                    <li>Install Podman container runtime</li>
                    <li>Configure GPU access for compute workloads</li>
                    <li>Test NVIDIA GPU integration</li>
                </ul>

                <div class="command">echo "deb https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/unstable/xUbuntu_22.04/ /" | sudo tee /etc/apt/sources.list.d/devel:kubic:libcontainers:unstable.list</div>

                <div class="command">curl -fsSL https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/unstable/xUbuntu_22.04/Release.key | sudo gpg --dearmor | sudo tee /etc/apt/trusted.gpg.d/devel_kubic_libcontainers_unstable.gpg > /dev/null</div>

                <div class="command">sudo apt update && sudo apt install podman</div>

                <div class="command">podman run --rm --device nvidia.com/gpu=all --security-opt=label=disable ubuntu nvidia-smi -L</div>

                <div class="verification">
                    <strong>Look for:</strong> GPU 0: NVIDIA GeForce RTX... with UUID
                </div>
            </div>
        </div>

        <!-- Step 7: Configure WSL2 DNS -->
        <div class="step" id="step7">
            <div class="step-header">
                <span class="step-number">7</span>Configure WSL2 DNS
            </div>
            <div class="step-content">
                <ul>
                    <li>Configure reliable DNS resolution</li>
                    <li>Ensure stable internet connectivity in Ubuntu</li>
                </ul>

                <p>Open WSL2 configuration file and prevent auto-generation of DNS settings:</p>
                <div class="command">sudo nano /etc/wsl.conf</div>

                <div class="code">
[boot]
systemd=true

[network]
generateResolvConf = false
                </div>

                <p>Save with Ctrl + X, then Y, then Enter</p>
            </div>
        </div>

        <!-- Step 8: Set Google DNS -->
        <div class="step" id="step8">
            <div class="step-header">
                <span class="step-number">8</span>Set Google DNS
            </div>
            <div class="step-content">
                <p>Configure DNS resolution:</p>
                <div class="command">sudo nano /etc/resolv.conf</div>

                <p>Delete ALL existing content and replace with:</p>
                <div class="code">
nameserver 8.8.8.8
nameserver 8.8.4.4
                </div>

                <p>From PowerShell (as Administrator):</p>
                <div class="command">wsl --shutdown</div>

                <p>Open Ubuntu and test:</p>
                <div class="command">nslookup google.com</div>
                
                <div class="important">
                    <strong>Troubleshooting:</strong> If you see 142.4.19.232 instead of 8.8.8.8, the DNS settings didn't stick. Go back and re-edit /etc/resolv.conf to add the nameservers again.
                </div>

                <div class="verification">
                    <strong>Expected:</strong> You will see server and address are set to google and this is correct
                    <div class="code" style="margin-top: 10px; font-size: 12px;">
nosana6@DESKTOP-85JBBCU:~$ nslookup google.com
Server:         8.8.8.8
Address:        8.8.8.8#53

Non-authoritative answer:
Name:   google.com
Address: 74.125.136.100
Name:   google.com
Address: 74.125.136.113
Name:   google.com
Address: 74.125.136.102
Name:   google.com
Address: 74.125.136.139
Name:   google.com
Address: 74.125.136.138
Name:   google.com
Address: 74.125.136.101
Name:   google.com
Address: 2607:f8b0:4002:c10::71
Name:   google.com
Address: 2607:f8b0:4002:c10::65
Name:   google.com
Address: 2607:f8b0:4002:c10::64
Name:   google.com
Address: 2607:f8b0:4002:c10::8b
                    </div>
                </div>

                <p>Download latest packages and security updates:</p>
                <div class="command">sudo apt update && sudo apt upgrade -y</div>

                <div class="important">
                    <strong>Next:</strong> Restart Docker Desktop and restart Ubuntu to ensure all changes take effect and do a one last check with nslookup google.com
                </div>
            </div>
        </div>

        <!-- Step 9: Nosana Install -->
        <div class="step" id="step9">
            <div class="step-header">
                <span class="step-number">9</span>Nosana Installation
            </div>
            <div class="step-content">
                <ul>
                    <li>Install Nosana CLI</li>
                    <li>Secure your private keys</li>
                    <li>Set up wallet for node operations</li>
                    <li>Configure wallet import/export options</li>
                </ul>

                <p>Install and run Nosana node:</p>
                <div class="command">bash <(wget -qO- https://nosana.com/start.sh)</div>

                <div class="critical">
                    <strong>CRITICAL: Backup Your Keys Before Funding!</strong><br>
                    Always backup your private key before adding funds to your wallet.
                </div>

                <div class="command">sudo cat ~/.nosana/nosana_key.json</div>
                <p>Copy the long string with [ ] brackets and backup securely</p>

                <div class="important">
                    <strong>Use for Reinstall of node:</strong><br>
                    <code>sudo nano ~/.nosana/nosana_key.json</code><br>
                    Clear with Ctrl+K, paste new key with [ ] brackets, save with Ctrl+X, Y, Enter
                </div>

                <p>Use "Import Private Key" in Phantom with your backed up key</p>
            </div>
        </div>
    </div>

    <script>
        // Theme toggle functionality
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const button = document.querySelector('.theme-button');
            const isDark = document.body.classList.contains('dark-mode');
            button.textContent = isDark ? '☀️ Toggle Light Mode' : '🌙 Toggle Dark Mode';
            
            // Save preference
            localStorage.setItem('darkMode', isDark);
        }

        // Load saved theme preference
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('darkMode');
            if (savedTheme === 'true') {
                document.body.classList.add('dark-mode');
                document.querySelector('.theme-button').textContent = '☀️ Toggle Light Mode';
            }
        });

        // Smooth scrolling for quick links
        document.querySelectorAll('.quick-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>
